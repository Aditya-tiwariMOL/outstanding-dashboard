<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Outstanding Receivables Dashboard</title>

<style>
:root {
  --brand: #0B419B;
  --light: #f4f7fb;
  --border: #e1e6ef;
}

body {
  font-family: Arial, sans-serif;
  background: var(--light);
  margin: 0;
  padding: 16px;
}

.container {
  background: #fff;
  border-radius: 12px;
  padding: 20px;
}

h1 {
  color: var(--brand);
  margin: 0;
}

.total {
  font-size: 32px;
  font-weight: bold;
  margin-top: 8px;
}

.updated {
  color: #666;
  margin-bottom: 16px;
}

.table-wrap {
  overflow-x: auto;
}

table {
  width: 100%;
  border-collapse: collapse;
  min-width: 850px;
}

thead {
  background: #eef3fb;
}

th, td {
  padding: 12px;
  border-bottom: 1px solid var(--border);
  text-align: right;
  white-space: nowrap;
}

th:first-child, td:first-child {
  text-align: left;
}

.sales {
  font-weight: bold;
  cursor: pointer;
  border-left: 4px solid var(--brand);
}

.customer {
  background: #fafbff;
  cursor: pointer;
}

.invoice {
  font-style: italic;
  color: #555;
}

.hidden {
  display: none;
}

.toggle {
  margin-right: 6px;
  font-weight: bold;
}

.red {
  color: #d93025;
}

/* Mobile polish */
@media (max-width: 600px) {
  body { padding: 8px; }
  h1 { font-size: 20px; }
  .total { font-size: 26px; }
}
</style>
</head>

<body>
<div class="container">
  <h1>Outstanding Receivables Dashboard</h1>
  <div class="total">₹ 7,74,000</div>
  <div class="updated">Last updated: 21 Jan 2026</div>

  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>Sales PIC</th>
          <th>Total</th>
          <th>90+</th>
          <th>61–90</th>
          <th>31–60</th>
          <th>1–30</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>
</div>

<script>
const data = [
  {
    name: "Bharat San",
    total: "1,23,000",
    buckets: ["–", "78,000", "–", "45,000"],
    customers: [
      {
        name: "ABC Traders",
        total: "45,000",
        buckets: ["–", "–", "–", "45,000"],
        invoices: [{ no: "INV-1001", total: "45,000" }]
      },
      {
        name: "XYZ Industries",
        total: "78,000",
        buckets: ["–", "78,000", "–", "–"],
        invoices: []
      }
    ]
  },
  {
    name: "Amit Verma",
    total: "2,82,000",
    buckets: ["1,25,000", "–", "1,02,000", "55,000"],
    customers: [
      { name: "ABC Traders", total: "60,000", buckets: ["–", "–", "60,000", "–"], invoices: [] },
      { name: "Sunrise Distributors", total: "97,000", buckets: ["–", "–", "42,000", "55,000"], invoices: [] },
      { name: "Apex Manufacturing", total: "1,25,000", buckets: ["1,25,000", "–", "–", "–"], invoices: [] }
    ]
  },
  {
    name: "Neha Kapoor",
    total: "2,19,000",
    buckets: ["90,000", "91,000", "–", "38,000"],
    customers: []
  },
  {
    name: "Rahul Sharma",
    total: "1,50,000",
    buckets: ["1,50,000", "–", "–", "–"],
    customers: []
  }
];

const body = document.getElementById("tableBody");
let openSales = null;
let openCustomer = null;

function closeAll() {
  document.querySelectorAll(".customer, .invoice").forEach(r => r.remove());
}

function render() {
  body.innerHTML = "";
  data.forEach((s, i) => {
    const tr = document.createElement("tr");
    tr.className = "sales";
    tr.innerHTML = `
      <td><span class="toggle">▶</span>${s.name}</td>
      <td>${s.total}</td>
      <td class="red">${s.buckets[0]}</td>
      <td>${s.buckets[1]}</td>
      <td>${s.buckets[2]}</td>
      <td>${s.buckets[3]}</td>
    `;
    tr.onclick = () => toggleSales(i, tr);
    body.appendChild(tr);
  });
}

function toggleSales(index, row) {
  closeAll();
  openCustomer = null;

  if (openSales === index) {
    openSales = null;
    return;
  }

  openSales = index;
  const sales = data[index];

  sales.customers.forEach(c => {
    const ctr = document.createElement("tr");
    ctr.className = "customer";
    ctr.innerHTML = `
      <td>&nbsp;&nbsp;<span class="toggle">▶</span>${c.name}</td>
      <td>${c.total}</td>
      <td>${c.buckets[0]}</td>
      <td>${c.buckets[1]}</td>
      <td>${c.buckets[2]}</td>
      <td>${c.buckets[3]}</td>
    `;
    ctr.onclick = (e) => {
      e.stopPropagation();
      toggleCustomer(c, ctr);
    };
    row.after(ctr);
  });
}

function toggleCustomer(customer, row) {
  document.querySelectorAll(".invoice").forEach(r => r.remove());

  if (openCustomer === customer) {
    openCustomer = null;
    return;
  }

  openCustomer = customer;
  customer.invoices.forEach(inv => {
    const itr = document.createElement("tr");
    itr.className = "invoice";
    itr.innerHTML = `
      <td>&nbsp;&nbsp;&nbsp;&nbsp;${inv.no}</td>
      <td>${inv.total}</td>
      <td>–</td><td>–</td><td>–</td><td>${inv.total}</td>
    `;
    row.after(itr);
  });
}

render();
</script>
</body>
</html>
