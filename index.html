<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Outstanding Receivables Dashboard</title>

<style>
:root {
  --brand:#0B419B;
  --border:#e3e7ef;
  --light:#f5f7fb;
}

body{
  font-family:Arial, sans-serif;
  background:var(--light);
  margin:0;
  padding:16px;
}

.container{
  background:#fff;
  border-radius:12px;
  padding:20px;
}

h1{color:var(--brand);margin:0}
.total{font-size:32px;font-weight:bold;margin:6px 0}
.updated{color:#666;margin-bottom:16px}

.table-wrap{overflow-x:auto}

table{
  border-collapse:collapse;
  min-width:850px;
  width:100%;
}

th,td{
  padding:12px;
  border-bottom:1px solid var(--border);
  text-align:right;
}

th:first-child,td:first-child{text-align:left}

thead{background:#eef3fb;color:var(--brand)}

.sales{
  font-weight:bold;
  cursor:pointer;
  border-left:4px solid var(--brand);
}

.customer{
  background:#fafbff;
  cursor:pointer;
}

.invoice{
  font-style:italic;
  color:#555;
}

.toggle{margin-right:6px}

.red{color:#d93025}

@media(max-width:600px){
  body{padding:8px}
  h1{font-size:20px}
  .total{font-size:26px}
}
</style>
</head>

<body>
<div class="container">
  <h1>Outstanding Receivables Dashboard</h1>
  <div class="total">₹ 7,74,000</div>
  <div class="updated">Last updated: 21 Jan 2026</div>

  <div class="table-wrap">
    <table>
      <thead>
        <tr>
          <th>Sales PIC</th>
          <th>Total</th>
          <th>90+</th>
          <th>61–90</th>
          <th>31–60</th>
          <th>1–30</th>
        </tr>
      </thead>
      <tbody id="tbody"></tbody>
    </table>
  </div>
</div>

<script>
const data = [
  {
    name:"Bharat San",
    total:"1,23,000",
    buckets:["–","78,000","–","45,000"],
    customers:[
      {
        name:"ABC Traders",
        total:"45,000",
        buckets:["–","–","–","45,000"],
        invoices:[
          {no:"INV-1001",total:"45,000"}
        ]
      },
      {
        name:"XYZ Industries",
        total:"78,000",
        buckets:["–","78,000","–","–"],
        invoices:[]
      }
    ]
  },
  {
    name:"Amit Verma",
    total:"2,82,000",
    buckets:["1,25,000","–","1,02,000","55,000"],
    customers:[
      {
        name:"ABC Traders",
        total:"60,000",
        buckets:["–","–","60,000","–"],
        invoices:[
          {no:"INV-2001",total:"60,000"}
        ]
      }
    ]
  }
];

const tbody=document.getElementById("tbody");
let openSales=null;
let openCustomer=null;

function clearBelow(row){
  let next=row.nextSibling;
  while(next && !next.classList.contains("sales")){
    let temp=next.nextSibling;
    next.remove();
    next=temp;
  }
}

function render(){
  tbody.innerHTML="";
  data.forEach((s,si)=>{
    const tr=document.createElement("tr");
    tr.className="sales";
    tr.innerHTML=`
      <td><span class="toggle">▶</span>${s.name}</td>
      <td>${s.total}</td>
      <td class="red">${s.buckets[0]}</td>
      <td>${s.buckets[1]}</td>
      <td>${s.buckets[2]}</td>
      <td>${s.buckets[3]}</td>`;
    tr.onclick=()=>toggleSales(tr,si);
    tbody.appendChild(tr);
  });
}

function toggleSales(row,si){
  if(openSales!==null){
    const prev=tbody.children[openSales];
    clearBelow(prev);
  }
  openCustomer=null;

  if(openSales===si){
    openSales=null;
    return;
  }

  openSales=si;
  const sales=data[si];

  sales.customers.forEach((c,ci)=>{
    const tr=document.createElement("tr");
    tr.className="customer";
    tr.innerHTML=`
      <td>&nbsp;&nbsp;<span class="toggle">▶</span>${c.name}</td>
      <td>${c.total}</td>
      <td>${c.buckets[0]}</td>
      <td>${c.buckets[1]}</td>
      <td>${c.buckets[2]}</td>
      <td>${c.buckets[3]}</td>`;
    tr.onclick=(e)=>{e.stopPropagation();toggleCustomer(tr,c)};
    row.after(tr);
    row=tr;
  });
}

function toggleCustomer(row,customer){
  let next=row.nextSibling;
  while(next && next.classList.contains("invoice")){
    let temp=next.nextSibling;
    next.remove();
    next=temp;
  }

  if(openCustomer===row){
    openCustomer=null;
    return;
  }

  openCustomer=row;
  customer.invoices.forEach(inv=>{
    const tr=document.createElement("tr");
    tr.className="invoice";
    tr.innerHTML=`
      <td>&nbsp;&nbsp;&nbsp;&nbsp;${inv.no}</td>
      <td>${inv.total}</td>
      <td>–</td><td>–</td><td>–</td><td>${inv.total}</td>`;
    row.after(tr);
    row=tr;
  });
}

render();
</script>
</body>
</html>
